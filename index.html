<!DOCTYPE html>
<html lang="en" class="dark scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aayan Rashid Wahab - Cybersecurity Portfolio</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font (Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* Base styles */
        body {
            font-family: 'Inter', sans-serif;
            cursor: default;
        }
        a, button, input[type="text"] {
            cursor: pointer;
        }

        .skill-badge {
            /* UPDATED: Changed from indigo to purple */
            @apply bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-sm font-medium px-4 py-2 rounded-full shadow-sm;
        }
        /* Hide scrollbar */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Game Styles */
        #game-canvas {
            background-color: #f3f4f6; /* bg-gray-100 */
            border: 2px solid #374151; /* border-gray-700 */
            @apply w-full h-auto max-w-[400px] rounded-lg shadow-inner;
            aspect-ratio: 1 / 1;
        }
        .dark #game-canvas {
            background-color: #1F2937; /* dark:bg-gray-800 */
            border: 2px solid #4B5563; /* dark:border-gray-600 */
        }

        /* Peeking Cat Image Style */
        #peeking-cat {
            position: fixed;
            bottom: -100px; /* Start hidden - assumes image is ~100px tall */
            left: 20px;
            width: 100px; /* Adjust width as needed */
            height: auto; /* Maintain aspect ratio */
            z-index: 50;
            transition: transform 0.5s ease-in-out;
            pointer-events: none; /* So it doesn't block clicks */
        }
        
        /* Trigger area for the cat */
        #cat-trigger {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 150px;
            height: 50px;
            z-index: 49;
        }

        /* Show cat when trigger is hovered */
        #cat-trigger:hover + #peeking-cat {
            transform: translateY(-100px); /* Slides the cat up by its height */
        }

        .dark #peeking-cat {
             /* Optional: if you want the cat to be slightly transparent in dark mode */
            opacity: 0.9;
        }
    </style>

    <!-- Tailwind Dark Mode Config -->
    <script>
        // UPDATED: Default to dark mode unless 'light' is explicitly saved
        if (localStorage.theme === 'light') {
            document.documentElement.classList.remove('dark');
        } else {
            document.documentElement.classList.add('dark');
        }

        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['monospace'],
                    },
                    animation: {
                        'pulse-food': 'pulse-food 1s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        'pulse-food': {
                            '0%, 100%': { transform: 'scale(1)', opacity: '1' },
                            '50%': { transform: 'scale(1.25)', opacity: '.75' },
                        }
                    }
                },
            },
        }
    </script>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 antialiased relative">

    <!-- Header / Navbar -->
    <header class="fixed top-0 left-0 right-0 z-50 bg-white/70 dark:bg-gray-900/70 backdrop-blur-lg shadow-sm">
        <nav class="container mx-auto max-w-5xl px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-xl font-bold text-purple-600 dark:text-purple-400">
                Aayan Rashid Wahab
            </a>
            <div class="flex items-center space-x-6">
                <!-- Desktop Nav Links -->
                <div class="hidden md:flex space-x-6">
                    <a href="#about" class="hover:text-purple-500 dark:hover:text-purple-300 transition-colors">About</a>
                    <a href="#more-about-me" class="hover:text-purple-500 dark:hover:text-purple-300 transition-colors">More</a>
                    <a href="#projects" class="hover:text-purple-500 dark:hover:text-purple-300 transition-colors">Projects</a>
                    <a href="#experience" class="hover:text-purple-500 dark:hover:text-purple-300 transition-colors">Experience</a>
                    <a href="#education" class="hover:text-purple-500 dark:hover:text-purple-300 transition-colors">Education</a>
                    <a href="#skills" class="hover:text-purple-500 dark:hover:text-purple-300 transition-colors">Skills</a>
                    <a href="#game" class="hover:text-purple-500 dark:hover:text-purple-300 transition-colors">Mini Game</a>
                    <a href="#contact" class="hover:text-purple-500 dark:hover:text-purple-300 transition-colors">Contact</a>
                </div>
                
                <!-- Dark Mode Toggle -->
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-600 dark:text-gray-300 focus:outline-none">
                    <!-- UPDATED: Sun icon (for switching to light mode) is now an <img> tag -->
                    <!-- Make sure to add 'sun-icon.png' to your folder! -->
                    <img id="theme-icon-light" src="sun-icon.png" alt="Light Mode" class="h-6 w-6 hidden">
                    <!-- Moon icon (for switching to dark mode) -->
                    <svg id="theme-icon-dark" class="h-6 w-6 hidden" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                </button>
                
                <!-- Mobile Menu Button -->
                <button id="mobile-menu-btn" class="md:hidden p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-600 dark:text-gray-300">
                    <svg id="menu-icon-open" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                    </svg>
                    <svg id="menu-icon-close" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pt-2 pb-4 space-y-2 bg-white dark:bg-gray-900/95 shadow-lg rounded-b-lg">
            <a href="#about" class="block mobile-menu-link">About</a>
            <a href="#more-about-me" class="block mobile-menu-link">More About Me</a>
            <a href="#projects" class="block mobile-menu-link">Projects</a>
            <a href="#experience" class="block mobile-menu-link">Experience</a>
            <a href="#education" class="block mobile-menu-link">Education</a>
            <a href="#skills" class="block mobile-menu-link">Skills</a>
            <a href="#game" class="block mobile-menu-link">Mini Game</a>
            <a href="#contact" class="block mobile-menu-link">Contact</a>
        </div>
        <style>
            .mobile-menu-link {
                @apply px-3 py-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 text-base font-medium;
            }
        </style>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto max-w-5xl px-6 pt-28 md:pt-32 pb-16">

        <!-- Hero Section -->
        <section class="flex flex-col-reverse md:flex-row items-center justify-between gap-8 md:gap-16">
            <div class="flex-1 text-center md:text-left">
                <h1 class="text-4xl md:text-5xl font-bold tracking-tight mb-4">
                    Hi, I'm <span class="text-purple-600 dark:text-purple-400">Aayan Rashid Wahab</span>
                </h1>
                <!-- START: Interactive Subtitle -->
                <h2 id="scramble-text" 
                    class="text-xl md:text-2xl font-mono font-medium text-purple-600 dark:text-purple-400 mb-6 min-h-[56px] md:min-h-[32px]"
                    data-text-1="Secure Software Development"
                    data-text-2="Cryptography & Threat Analysis"
                    data-text-3="AI for Security Applications">
                </h2>
                <!-- END: Interactive Subtitle -->
                <p class="text-lg text-gray-700 dark:text-gray-300 mb-8 max-w-xl mx-auto md:mx-0">
                    I am a proactive Cyber Security undergraduate at GIKI ('27) with a passion for building and defending digital systems. I have hands-on experience in network sniffing, web app vulnerability analysis, and secure processor simulation.
                </p>
                <div class="flex justify-center md:justify-start gap-4">
                    <!-- This link points to the PDF you will add to your folder -->
                    <a href="Aayan_Rashid_CV.pdf" target="_blank" class="px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg shadow-md transition-all transform hover:scale-105">
                        View My Resume
                    </a>
                    <a href="#projects" class="px-6 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-medium rounded-lg shadow-md transition-all transform hover:scale-105">
                        See My Projects
                    </a>
                </div>
                <!-- Social Links -->
                <div class="mt-8 flex justify-center md:justify-start gap-6">
                    <!-- GitHub Link -->
                    <a href="https://github.com/killerpanda9995" target="_blank" rel="noopener noreferrer" class="text-gray-500 dark:text-gray-400 hover:text-purple-500 dark:hover:text-purple-300 transition-colors" title="GitHub">
                        <svg class="h-8 w-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12c0 4.418 2.865 8.165 6.839 9.489.5.092.682-.217.682-.482 0-.237-.009-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.11-4.555-4.951 0-1.093.39-1.988 1.03-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.026 2.747-1.026.546 1.379.202 2.398.1 2.65.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .267.18.577.688.48C19.135 20.165 22 16.418 22 12c0-5.523-4.477-10-10-10z" clip-rule="evenodd" />
                        </svg>
                    </a>
                    <a href="https://www.linkedin.com/in/aayanrashid/" target="_blank" rel="noopener noreferrer" class="text-gray-500 dark:text-gray-400 hover:text-purple-500 dark:hover:text-purple-300 transition-colors" title="LinkedIn">
                        <svg class="h-8 w-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.783-1.75-1.75s.784-1.75 1.75-1.75 1.75.783 1.75 1.75-.783 1.75-1.75 1.75zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z" />
                        </svg>
                    </a>
                </div>
            </div>
            <!-- Hero Image -->
            <div class="flex-1 flex justify-center md:justify-end">
                <!-- This now points to your local 'profile.png' file -->
                <!-- Add 'profile.png' to your project folder! -->
                <img src="profile.png" 
                     alt="Aayan Rashid Wahab" 
                     class="w-64 h-64 md:w-80 md:h-80 lg:w-96 lg:h-96 rounded-full shadow-xl object-cover border-4 border-white dark:border-gray-800">
            </div>
        </section>

        <!-- About Me Section -->
        <section id="about" class="mt-24 md:mt-32">
            <h2 class="text-3xl font-bold text-center mb-12">About Me</h2>
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-8 md:p-12">
                <p class="text-lg text-gray-700 dark:text-gray-300 mb-6">
                    I am a highly motivated and proactive Cyber Security undergraduate at the <strong class="font-semibold text-gray-900 dark:text-white">Ghulam Ishaq Khan Institute (GIKI '27)</strong>, specializing in Secure Software Development, Cryptography, and the application of AI in security.
                </p>
                <p class="text-lg text-gray-700 dark:text-gray-300 mb-6">
                    My passion lies in building and defending digital systems. I have demonstrated this through numerous hands-on projects, including developing a full-stack file encryption tool, a Python-based packet sniffer, and a blockchain-secured processor simulator. I thrive on analyzing vulnerabilities and implementing robust security measures.
                </p>
                <p class="text-lg text-gray-700 dark:text-gray-300">
                    Beyond my technical projects, I am an active member of the GIKI community. I provide technical support for national events with <strong class="font-semibold text-gray-900 dark:text-white">IEEE GIK</strong> and manage media and outreach for community-focused organizations like <strong class="font-semibold text-gray-900 dark:text-white">Project Topi</strong>. I'm now seeking to apply my practical skills and dedicated mindset to advanced learning and impactful collaboration—whether through graduate studies, research initiatives, or innovative technical projects.
                </p>
            </div>
        </section>

        <!-- "More About Me" Section -->
        <section id="more-about-me" class="mt-24">
            <h2 class="text-3xl font-bold text-center mb-12">Beyond the Code</h2>
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-8 md:p-12">
                <p class="text-lg text-gray-700 dark:text-gray-300 mb-8 text-center">
                    When I'm not focused on security, I'm just as active in the physical and creative worlds.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <!-- Item 1 -->
                    <div>
                        <div class="p-4 bg-purple-100 dark:bg-purple-900 rounded-full w-20 h-20 mx-auto flex items-center justify-center mb-4">
                            <svg class="w-10 h-10 text-purple-600 dark:text-purple-300" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">My Journey</h3>
                        <p class="text-gray-600 dark:text-gray-400">Born in Karachi, Pakistan, and grew up in Riyadh, Saudi Arabia. This gave me a diverse, multicultural perspective.</p>
                    </div>
                    
                    <!-- Item 2 (UPDATED: Now an <img> tag) -->
                    <div>
                        <div class="p-4 bg-purple-100 dark:bg-purple-900 rounded-full w-20 h-20 mx-auto flex items-center justify-center mb-4">
                            <!-- This will load 'hobby-icon.png' from your folder -->
                            <!-- You can use a basketball or skateboard png! -->
                            <img src="hobby-icon.png" alt="Hobby Icon" class="w-12 h-12 object-contain">
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Active Hobbies</h3>
                        <p class="text-gray-600 dark:text-gray-400">You can usually find me on the basketball court, skateboarding around campus, or exploring with my camera.</p>
                    </div>
                    
                    <!-- Item 3 (UPDATED: New Book Icon) -->
                    <div>
                        <div class="p-4 bg-purple-100 dark:bg-purple-900 rounded-full w-20 h-20 mx-auto flex items-center justify-center mb-4">
                            <!-- UPDATED: Open book icon -->
                            <svg class="w-10 h-10 text-purple-600 dark:text-purple-300" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">Creative Side</h3>
                        <p class="text-gray-600 dark:text-gray-400">I'm also passionate about my hobbies. I spend my free time drawing, reading (my all-time favorite is 'My Family and Other Animals' by Gerald Durrell), and experimenting with new cooking recipes.</p>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Projects Section -->
        <section id="projects" class="mt-24">
            <h2 class="text-3xl font-bold text-center mb-12">Projects</h2>
            <div class="grid md:grid-cols-2 gap-8">

                <!-- Project Card Template -->
                <style>
                    .project-card {
                        @apply bg-white dark:bg-gray-800 rounded-lg shadow-xl overflow-hidden flex flex-col transition-all duration-300 ease-in-out;
                    }
                    .project-card:hover {
                        @apply shadow-2xl dark:shadow-purple-500/20 -translate-y-1;
                    }
                </style>

                <!-- Project 1 -->
                <div class="project-card">
                    <!-- This points to your local 'project-encryption.png' file -->
                    <img src="project-encryption.png" alt="File Encryption Manager" class="w-full h-48 object-cover">
                    <div class="p-6 flex flex-col flex-grow">
                        <h3 class="text-xl font-semibold mb-2">Full-Stack File Encryption Manager</h3>
                        <p class="text-gray-700 dark:text-gray-300 mb-4 flex-grow">
                            Co-developed a full-stack, end-to-end file encryption solution. Features a dynamic frontend (HTML/CSS/JS) and a robust C++ CGI backend with AJAX for real-time, responsive operations.
                        </p>
                        <div class="mb-4 flex flex-wrap gap-2">
                            <span class="skill-badge">C++</span>
                            <span class="skill-badge">CGI</span>
                            <span class="skill-badge">HTML/CSS</span>
                            <span class="skill-badge">AJAX</span>
                        </div>
                        <div class="mt-auto flex items-center gap-6">
                            <!-- GitHub Link -->
                            <a href="https://github.com/muaazbinsalman/Encryptor" target="_blank" rel="noopener noreferrer" class="text-purple-600 dark:text-purple-400 hover:underline font-medium">
                                View on GitHub &rarr;
                            </a>
                            <!-- PDF LINK -->
                            <a href="project-encryption-report.pdf" target="_blank" rel="noopener noreferrer" class="text-gray-600 dark:text-gray-400 hover:underline font-medium">
                                View Report &rarr;
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Project 2 -->
                <div class="project-card">
                    <!-- This points to your local 'project-sniffer.png' file -->
                    <img src="project-sniffer.png" alt="Network Packet Sniffer" class="w-full h-48 object-cover">
                    <div class="p-6 flex flex-col flex-grow">
                        <h3 class="text-xl font-semibold mb-2">Network Packet Sniffer (PacketWatch)</h3>
                        <p class="text-gray-700 dark:text-gray-300 mb-4 flex-grow">
                            Co-developed a real-time network packet capture and analysis tool with a user-friendly GUI. Utilizes Scapy for packet capturing and advanced data structures (Linked Lists, AVL Trees) for efficient data management.
                        </p>
                        <div class="mb-4 flex flex-wrap gap-2">
                            <span class="skill-badge">Python</span>
                            <span class="skill-badge">Scapy</span>
                            <span class="skill-badge">Tkinter</span>
                            <span class="skill-badge">Data Structures</span>
                        </div>
                        <div class="mt-auto flex items-center gap-6">
                            <!-- PDF LINK -->
                            <a href="project-sniffer-report.pdf" target="_blank" rel="noopener noreferrer" class="text-purple-600 dark:text-purple-400 hover:underline font-medium">
                                View Report &rarr;
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Project 3 -->
                <div class="project-card">
                    <!-- This points to your local 'project-blip.png' file -->
                    <img src="project-blip.png" alt="BLIP Processor Simulator" class="w-full h-48 object-cover">
                    <div class="p-6 flex flex-col flex-grow">
                        <h3 class="text-xl font-semibold mb-2">BLIP: Secure Instruction Processor</h3>
                        <p class="text-gray-700 dark:text-gray-300 mb-4 flex-grow">
                            Team-developed a Python-based simulator for a processor that integrates blockchain-based security. Uses hash validation and Proof-of-Work to detect instruction tampering before execution.
                        </p>
                        <div class="mb-4 flex flex-wrap gap-2">
                            <span class="skill-badge">Python</span>
                            <span class="skill-badge">Blockchain</span>
                            <span class="skill-badge">Cryptography</span>
                            <span class="skill-badge">Tkinter</span>
                        </div>
                        <div class="mt-auto flex items-center gap-6">
                            <!-- PDF LINK -->
                            <a href="project-blip-report.pdf" target="_blank" rel="noopener noreferrer" class="text-purple-600 dark:text-purple-400 hover:underline font-medium">
                                View Report &rarr;
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Project 4 -->
                <div class="project-card">
                    <!-- This points to your local 'project-vuln.png' file -->
                    <img src="project-vuln.png" alt="Web App Vulnerability Analysis" class="w-full h-48 object-cover">
                    <div class="p-6 flex flex-col flex-grow">
                        <h3 class="text-xl font-semibold mb-2">Web App Vulnerability Analysis</h3>
                        <p class="text-gray-700 dark:text-gray-300 mb-4 flex-grow">
                            Identified and mitigated critical web application vulnerabilities (XSS, DoS, CSRF, Info Disclosure) on the Gruyere test platform. Implemented security measures like input validation, CSP, and CSRF tokens.
                        </p>
                        <div class="mb-4 flex flex-wrap gap-2">
                            <span class="skill-badge">Web Security</span>
                            <span class="skill-badge">XSS</span>
                            <span class="skill-badge">CSRF</span>
                            <span class="skill-badge">DoS</span>
                        </div>
                        <div class="mt-auto flex items-center gap-6">
                            <!-- PDF LINK -->
                            <a href="project-vuln-analysis.pdf" target="_blank" rel="noopener noreferrer" class="text-purple-600 dark:text-purple-400 hover:underline font-medium">
                                View Report &rarr;
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Project 5 -->
                <div class="project-card">
                    <!-- This points to your local 'project-alert.png' file -->
                    <img src="project-alert.png" alt="Cybersecurity Alert System" class="w-full h-48 object-cover">
                    <div class="p-6 flex flex-col flex-grow">
                        <h3 class="text-xl font-semibold mb-2">Cybersecurity Alert System</h3>
                        <p class="text-gray-700 dark:text-gray-300 mb-4 flex-grow">
                            Co-developed an alert system for suspicious login activities. Features real-time monitoring, efficient data storage/search using Binary Search Trees (BST), and graph-based clustering analysis for suspicious IPs.
                        </p>
                        <div class="mb-4 flex flex-wrap gap-2">
                            <span class="skill-badge">Data Structures</span>
                            <span class="skill-badge">BST</span>
                            <span class="skill-badge">Graph Theory</span>
                            <span class="skill-badge">Security Audit</span>
                        </div>
                        <div class="mt-auto flex items-center gap-6">
                            <!-- PDF LINK -->
                            <a href="project-alert-system.pdf" target="_blank" rel="noopener noreferrer" class="text-purple-600 dark:text-purple-400 hover:underline font-medium">
                                View Report &rarr;
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Project 6 -->
                <div class="project-card">
                    <!-- This points to your local 'project-ids.png' file -->
                    <img src="project-ids.png" alt="IDS/Firewall Evasion Lab" class="w-full h-48 object-cover">
                    <div class="p-6 flex flex-col flex-grow">
                        <h3 class="text-xl font-semibold mb-2">IDS & Firewall Evasion Lab</h3>
                        <p class="text-gray-700 dark:text-gray-300 mb-4 flex-grow">
                            Gained hands-on experience in ethical hacking by deploying and configuring Snort IDS to detect intrusions. Conducted FTP credential cracking using THC-Hydra and network reconnaissance with Nmap.
                        </p>
                        <div class="mb-4 flex flex-wrap gap-2">
                            <span class="skill-badge">Snort (IDS)</span>
                            <span class="skill-badge">THC-Hydra</span>
                            <span class="skill-badge">Nmap</span>
                            <span class="skill-badge">Penetration Testing</span>
                        </div>
                        <div class="mt-auto flex items-center gap-6">
                            <!-- PDF LINK -->
                            <a href="project-ids-lab.pdf" target="_blank" rel="noopener noreferrer" class="text-purple-600 dark:text-purple-400 hover:underline font-medium">
                                View Report &rarr;
                            </a>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- Experience Section -->
        <section id="experience" class="mt-24">
            <h2 class="text-3xl font-bold text-center mb-12">Leadership & Experience</h2>
            <div class="space-y-12">
                
                <!-- Experience Item 1 -->
                <div class="flex flex-col md:flex-row gap-8 items-center bg-white dark:bg-gray-800 rounded-lg shadow-xl p-8 transform transition-all duration-300 hover:scale-[1.02]">
                    <div class="w-full md:w-1/3">
                        <h3 class="text-2xl font-semibold mb-2 text-purple-600 dark:text-purple-400">Media & Outreach Lead</h3>
                        <p class="text-lg text-gray-600 dark:text-gray-400 mb-2">Project Topi (GIKI)</p>
                    </div>
                    <div class="w-full md:w-2/3">
                        <ul class="list-disc list-inside text-lg text-gray-700 dark:text-gray-300 space-y-2">
                            <li>I lead media coverage for all society events, including KHSB'24.</li>
                            <li>I manage the society's social media presence to boost engagement and awareness.</li>
                            <li>I actively assist in fundraising efforts and community outreach programs to support underserved communities.</li>
                        </ul>
                    </div>
                </div>

                <!-- Experience Item 2 -->
                <div class="flex flex-col md:flex-row gap-8 items-center bg-white dark:bg-gray-800 rounded-lg shadow-xl p-8 transform transition-all duration-300 hover:scale-[1.02]">
                    <div class="w-full md:w-1/3">
                        <h3 class="text-2xl font-semibold mb-2 text-purple-600 dark:text-purple-400">Technical Team Member</h3>
                        <p class="text-lg text-gray-600 dark:text-gray-400 mb-2">IEEE (GIKI Chapter)</p>
                    </div>
                    <div class="w-full md:w-2/3">
                        <ul class="list-disc list-inside text-lg text-gray-700 dark:text-gray-300 space-y-2">
                            <li>I provide critical technical support during national-level competitions like the National Electronics Olympiad (NEO'24).</li>
                            <li>My role includes real-time troubleshooting of equipment and software issues for participants.</li>
                            <li>I collaborate with the organizing committee to plan and execute technical events.</li>
                        </ul>
                    </div>
                </div>

            </div>
        </section>

        <!-- Education & Certifications Section -->
        <section id="education" class="mt-24">
            <h2 class="text-3xl font-bold text-center mb-12">Education & Certifications</h2>
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Education -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-8">
                    <h3 class="text-2xl font-semibold text-center mb-6">Education</h3>
                    <div class="relative pl-8 border-l-2 border-purple-300 dark:border-purple-700">
                        <!-- GIKI -->
                        <div class="mb-8">
                            <div class="absolute w-4 h-4 bg-purple-600 rounded-full -left-2 mt-1.5"></div>
                            <p class="text-sm text-gray-500 dark:text-gray-400">Sep 2023 – May 2027 (Expected)</p>
                            <h4 class="text-xl font-semibold mt-1">Bachelor of Science, Cyber Security</h4>
                            <p class="text-lg text-gray-700 dark:text-gray-300">Ghulam Ishaq Khan Institute (GIKI)</p>
                        </div>
                    </div>
                </div>
                <!-- Certifications -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-8">
                    <h3 class="text-2xl font-semibold text-center mb-6">Key Certifications</h3>
                    <div class="relative pl-8 border-l-2 border-gray-200 dark:border-gray-700 no-scrollbar overflow-y-auto max-h-48">
                        <!-- Google AI -->
                        <div class="mb-6">
                            <div class="absolute w-4 h-4 bg-gray-400 rounded-full -left-2 mt-1.5"></div>
                            <h4 class="text-xl font-semibold">Google AI Essentials</h4>
                            <p class="text-lg text-gray-700 dark:text-gray-300">Google</p>
                        </div>
                        <!-- Google IT Security -->
                        <div class="mb-6">
                            <div class="absolute w-4 h-4 bg-gray-400 rounded-full -left-2 mt-1.5"></div>
                            <h4 class="text-xl font-semibold">Google IT Security</h4>
                            <p class="text-lg text-gray-700 dark:text-gray-300">Google</p>
                        </div>
                        <!-- Cisco Networking -->
                        <div class="mb-6">
                            <div class="absolute w-4 h-4 bg-gray-400 rounded-full -left-2 mt-1.5"></div>
                            <h4 class="text-xl font-semibold">Cisco: Networking Basics</h4>
                            <p class="text-lg text-gray-700 dark:text-gray-300">Cisco Networking Academy</p>
                        </div>
                        <!-- Cisco Cybersecurity -->
                        <div class="mb-6">
                            <div class="absolute w-4 h-4 bg-gray-400 rounded-full -left-2 mt-1.5"></div>
                            <h4 class="text-xl font-semibold">Cisco: Intro to Cybersecurity</h4>
                            <p class="text-lg text-gray-700 dark:text-gray-300">Cisco Networking Academy</p>
                        </div>
                        <!-- TCM Linux -->
                        <div class="mb-6">
                            <div class="absolute w-4 h-4 bg-gray-400 rounded-full -left-2 mt-1.5"></div>
                            <h4 class="text-xl font-semibold">TCM Security: Linux 100</h4>
                            <p class="text-lg text-gray-700 dark:text-gray-300">TCM Security</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Skills Section -->
        <section id="skills" class="mt-24">
            <h2 class="text-3xl font-bold text-center mb-12">Skills</h2>
            
            <!-- Technical Skills -->
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-8 md:p-12">
                <h3 class="text-2xl font-semibold text-center mb-8">Technical Skills</h3>
                <div class="flex flex-wrap justify-center gap-3 md:gap-4">
                    <span class="skill-badge">Python</span>
                    <span class="skill-badge">C++</span>
                    <span class="skill-badge">Linux (Parrot OS, Kali)</span>
                    <span class="skill-badge">Network Analysis</span>
                    <span class="skill-badge">Packet Tracer</span>
                    <span class="skill-badge">Scapy</span>
                    <span class="skill-badge">Snort (IDS)</span>
                    <span class="skill-badge">Nmap</span>
                    <span class="skill-badge">THC-Hydra</span>
                    <span class="skill-badge">Web Vulnerability Analysis</span>
                    <span class="skill-badge">Cryptography</span>
                    <span class="skill-badge">HTML / CSS / JS</span>
                    <span class="skill-badge">Firebase (Firestore)</span>
                    <span class="skill-badge">AI / Machine Learning</span>
                </div>
            </div>

            <!-- Professional Skills -->
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-8 md:p-12 mt-8">
                <h3 class="text-2xl font-semibold text-center mb-8">Professional Skills</h3>
                <div class="flex flex-wrap justify-center gap-3 md:gap-4">
                    <span class="skill-badge">Technical Support</span>
                    <span class="skill-badge">Project Management</span>
                    <span class="skill-badge">Social Media Management</span>
                    <span class="skill-badge">Digital Arts & Design</span>
                    <span class="skill-badge">Photography (DSLR)</span>
                    <span class="skill-badge">Community Outreach</span>
                </div>
            </div>

            <!-- Languages -->
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-8 md:p-12 mt-8">
                <h3 class="text-2xl font-semibold text-center mb-8">Languages</h3>
                <div class="flex flex-wrap justify-center gap-3 md:gap-4">
                    <span class="skill-badge">English (C2 Proficient)</span>
                    <span class="skill-badge">Urdu (Native)</span>
                    <span class="skill-badge">Arabic (B2)</span>
                </div>
            </div>
        </section>

        <!-- Game Section -->
        <section id="game" class="mt-24 text-center">
            <h2 class="text-3xl font-bold mb-8">Need a Break? Play this Mini Game.</h2>
            <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 md:p-8 flex flex-col items-center md:flex-row md:items-start md:justify-center gap-8">
                
                <!-- Game Canvas Area -->
                <div class="flex-shrink-0 flex flex-col items-center w-full max-w-[400px]">
                    <div class="flex flex-wrap items-center justify-center gap-2 mb-4 h-auto min-h-[2.5rem]">
                        <button id="start-game-btn" class="px-6 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg shadow-md transition-all w-32">
                            Start Game
                        </button>
                        <button id="pause-game-btn" class="px-6 py-2 bg-yellow-500 hover:bg-yellow-600 text-white font-medium rounded-lg shadow-md transition-all w-32 hidden">
                            Pause
                        </button>
                        
                        <div id="submit-score-form" class="hidden flex items-center gap-2">
                            <input type="text" id="player-name" placeholder="AAA" maxlength="3" class="w-16 p-2 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-center font-mono uppercase focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <button id="submit-score-btn" class="px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg shadow-md transition-all">
                                Submit
                            </button>
                        </div>
                        
                        <div class="text-lg font-medium ml-2">
                            Score: <span id="score" class="font-bold text-purple-600 dark:text-purple-400">0</span>
                        </div>
                    </div>
                    
                    <!-- Canvas -->
                    <div class="w-full max-w-[400px] relative">
                        <canvas id="game-canvas" width="400" height="400" class="w-full h-auto"></canvas>
                        <div id="pause-overlay" class="absolute inset-0 flex items-center justify-center bg-black/50 text-white text-4xl font-bold rounded-lg hidden">
                            PAUSED
                        </div>
                    </div>
                    
                    <p class="text-sm text-gray-600 dark:text-gray-400 mt-4">Use Arrow Keys (or swipe) to move. Press 'P' to pause.</p>
                </div>
                
                <!-- Leaderboard Area -->
                <div class="w-full md:w-64 flex-shrink-0">
                    <h3 class="text-2xl font-semibold mb-4 text-gray-800 dark:text-gray-200">High Scores</h3>
                    <div id="leaderboard" class="space-y-2">
                        <!-- Loading spinner -->
                        <div id="leaderboard-loader" class="flex justify-center items-center h-24">
                            <svg class="animate-spin h-8 w-8 text-purple-600 dark:text-purple-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                        </div>
                        <!-- Scores will be dynamically inserted here by JS -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="mt-24 text-center">
            <h2 class="text-3xl font-bold mb-6">Get In Touch</h2>
            <p class="text-lg text-gray-700 dark:text-gray-300 mb-8 max-w-2xl mx-auto">
                I am actively seeking Master's opportunities in Germany and am open to internships and research opportunities in the cybersecurity field. I'm excited to connect and discuss how my skills can be an asset to your team.
            </p>
            <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
                <a href="mailto:u2023002@giki.edu.pk" 
                   class="inline-block px-8 py-4 bg-purple-600 hover:bg-purple-700 text-white font-medium rounded-lg shadow-lg transition-all text-lg transform hover:scale-105">
                    Email Me
                </a>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 mt-24">
        <div class="container mx-auto max-w-5xl px-6 py-8 flex flex-col md:flex-row justify-between items-center text-gray-600 dark:text-gray-400">
            <p class="text-sm">&copy; 2025 Aayan Rashid Wahab. All rights reserved.</p>
            <div class="flex gap-6 mt-4 md:mt-0">
                <!-- GitHub Link -->
                <a href="https://github.com/killerpanda9995" target="_blank" rel="noopener noreferrer" class="hover:text-purple-500 dark:hover:text-purple-300 transition-colors text-sm">
                    GitHub
                </a>
                <a href="https://www.linkedin.com/in/aayanrashid/" target="_blank" rel="noopener noreferrer" class="hover:text-purple-500 dark:hover:text-purple-300 transition-colors text-sm">
                    LinkedIn
                </a>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button id="back-to-top" class="hidden fixed bottom-8 right-8 bg-purple-600 hover:bg-purple-700 text-white p-3 rounded-full shadow-lg transition-all duration-300 ease-in-out transform hover:scale-110 focus:outline-none">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" />
        </svg>
    </button>
    
    <!-- Restart Confirmation Modal -->
    <div id="restart-modal" class="hidden fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full p-6 text-center">
            <h3 class="text-xl font-semibold mb-4 text-gray-900 dark:text-white">Restart Game?</h3>
            <p class="text-gray-600 dark:text-gray-300 mb-6">Are you sure you want to restart? Your current score will be lost.</p>
            <div class="flex justify-center gap-4">
                <button id="confirm-restart-btn" class="px-6 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg shadow-md transition-all">
                    Restart
                </button>
                <button id="cancel-restart-btn" class="px-6 py-2 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 font-medium rounded-lg shadow-md transition-all">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- PEEKING CAT (PNG) -->
    <div id="cat-trigger"></div> <!-- Invisible hover area -->
    <!-- FIXED: Make sure to add 'peeking-cat.png' to your folder! -->
    <img id="peeking-cat" src="peeking-cat.png" alt="A cat peeking from the bottom of the page">


    <!-- Firebase SDK Scripts -->
    <script type="module">
        // Import the functions you need from the SDKs
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, query, orderBy, limit } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        // --- Your Firebase Config ---
        // This is your actual config, pasted in
        const firebaseConfig = {
            apiKey: "AIzaSyAEXz8yTRwyUZqxron6m2RL5NKV6lEucJs",
            authDomain: "my-portfolio-leaderboard.firebaseapp.com",
            projectId: "my-portfolio-leaderboard",
            storageBucket: "my-portfolio-leaderboard.firebasestorage.app",
            messagingSenderId: "82824527056",
            appId: "1:82824527056:web:e78f74e39b5b3be36cb2d5",
            measurementId: "G-BG3CYZJ9JJ"
        };
        // --------------------------------------------------

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const highscoresCol = collection(db, "highscores");
        
        // --- Game & Leaderboard Logic ---
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');
        const startBtn = document.getElementById('start-game-btn');
        const pauseBtn = document.getElementById('pause-game-btn');
        const pauseOverlay = document.getElementById('pause-overlay');
        const scoreEl = document.getElementById('score');
        
        const leaderboardEl = document.getElementById('leaderboard');
        const leaderboardLoader = document.getElementById('leaderboard-loader');
        const submitScoreForm = document.getElementById('submit-score-form');
        const playerNameInput = document.getElementById('player-name');
        const submitScoreBtn = document.getElementById('submit-score-btn');
        
        // Modal elements
        const restartModal = document.getElementById('restart-modal');
        const confirmRestartBtn = document.getElementById('confirm-restart-btn');
        const cancelRestartBtn = document.getElementById('cancel-restart-btn');

        const grid = 20;
        let count = 0;
        let score = 0;
        let snake = [{ x: 160, y: 160 }];
        let food = {};
        let dx = grid;
        let dy = 0;
        let gameLoop;
        let isGameRunning = false;
        let isGamePaused = false;
        let foodPulse = 0; // For food animation

        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min)) + min;
        }

        function resetGame() {
            snake = [{ x: 160, y: 160 }];
            dx = grid;
            dy = 0;
            score = 0;
            scoreEl.textContent = '0';
            placeFood();
            startBtn.textContent = "Start Game";
            isGameRunning = false;
            isGamePaused = false;
            pauseOverlay.classList.add('hidden');
            pauseBtn.classList.add('hidden');
        }

        function placeFood() {
            food = {
                x: getRandomInt(0, canvas.width / grid) * grid,
                y: getRandomInt(0, canvas.height / grid) * grid
            };
        }

        // --- Main Game Loop ---
        function loop() {
            if (isGamePaused) { // Check if game is paused
                return;
            }
            gameLoop = requestAnimationFrame(loop);

            // UPDATED: Slowed down game speed (higher number = slower)
            if (++count < 10) { 
                return;
            }
            count = 0;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Move snake
            const head = { x: snake[0].x + dx, y: snake[0].y + dy };
            snake.unshift(head);

            // Check for collision with walls
            if (head.x < 0 || head.x >= canvas.width || head.y < 0 || head.y >= canvas.height) {
                endGame();
                return;
            }

            // Check for collision with self
            for (let i = 1; i < snake.length; i++) {
                if (head.x === snake[i].x && head.y === snake[i].y) {
                    endGame();
                    return;
                }
            }

            // Check for food
            if (head.x === food.x && head.y === food.y) {
                score++;
                scoreEl.textContent = score;
                placeFood();
            } else {
                snake.pop();
            }

            // Draw food (apple) - with pulsing effect
            foodPulse = (foodPulse + 0.1) % (Math.PI * 2);
            const pulseSize = grid - 1 + Math.sin(foodPulse) * 2;
            // UPDATED: Food color changed to green
            ctx.fillStyle = '#22C55E'; // text-green-500
            ctx.fillRect(food.x + (grid - pulseSize) / 2, food.y + (grid - pulseSize) / 2, pulseSize, pulseSize);

            // Draw snake body
            // UPDATED: Snake color changed to purple
            ctx.fillStyle = '#A855F7'; // text-purple-500
            for (let i = 1; i < snake.length; i++) {
                ctx.fillRect(snake[i].x, snake[i].y, grid - 1, grid - 1);
            }
            
            // Draw snake head (different color)
            // UPDATED: Snake head color changed to darker purple
            ctx.fillStyle = '#7E22CE'; // darker text-purple-700
            ctx.fillRect(head.x, head.y, grid - 1, grid - 1);
        }
        
        // --- Confirmation Modal Logic ---
        function showRestartModal() {
            // Pause game if it's running
            if (isGameRunning && !isGamePaused) {
                togglePause();
            }
            restartModal.classList.remove('hidden');
        }
        
        function hideRestartModal() {
            // Unpause game if it was running and we pressed cancel
            if (isGameRunning && isGamePaused) {
                // Check if the pause button text is "Resume", which means it was paused *by the modal*
                if (pauseBtn.textContent === "Resume") {
                    togglePause();
                }
            }
            restartModal.classList.add('hidden');
        }
        
        cancelRestartBtn.addEventListener('click', hideRestartModal);
        
        confirmRestartBtn.addEventListener('click', () => {
            restartModal.classList.add('hidden');
            if (isGamePaused) { // Unpause before starting
                isGamePaused = false;
            }
            startGame();
        });
        
        // UPDATED: Start button now calls the confirmation modal if game is running
        startBtn.addEventListener('click', () => {
            if (isGameRunning) {
                showRestartModal();
            } else {
                startGame();
            }
        });

        function startGame() {
            submitScoreForm.classList.add('hidden');
            startBtn.classList.remove('hidden');
            
            if (isGameRunning) {
                cancelAnimationFrame(gameLoop);
            }
            resetGame(); // Reset game state
            isGameRunning = true;
            isGamePaused = false;
            pauseOverlay.classList.add('hidden');
            startBtn.textContent = "Restart Game";
            pauseBtn.textContent = "Pause";
            pauseBtn.classList.remove('hidden'); // Show pause button
            gameLoop = requestAnimationFrame(loop);
        }

        function endGame() {
            cancelAnimationFrame(gameLoop);
            isGameRunning = false;
            pauseBtn.classList.add('hidden'); // Hide pause button
            
            startBtn.classList.add('hidden');
            if (score > 0) {
                submitScoreForm.classList.remove('hidden');
            } else {
                startBtn.textContent = "Start Over";
                startBtn.classList.remove('hidden');
            }

            ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = 'white';
            ctx.font = '40px Inter, sans-serif';
            ctx.textAlign = 'center';
            ctx.fillText('Game Over!', canvas.width / 2, canvas.height / 2 - 20);
            ctx.font = '20px Inter, sans-serif';
            ctx.fillText(`Final Score: ${score}`, canvas.width / 2, canvas.height / 2 + 20);
        }

        // --- New Pause Function ---
        function togglePause() {
            if (!isGameRunning) return; // Don't pause if game isn't running
            
            isGamePaused = !isGamePaused;
            if (isGamePaused) {
                pauseOverlay.classList.remove('hidden');
                pauseBtn.textContent = "Resume";
            } else {
                pauseOverlay.classList.add('hidden');
                pauseBtn.textContent = "Pause";
                gameLoop = requestAnimationFrame(loop); // Resume the game loop
            }
        }

        pauseBtn.addEventListener('click', togglePause); // Add listener to pause button

        // --- New Firebase Leaderboard Functions ---

        async function getLeaderboard() {
            leaderboardLoader.classList.remove('hidden');
            leaderboardEl.innerHTML = ''; // Clear current board

            try {
                // Query: get the top 5 scores, ordered by score descending
                const q = query(highscoresCol, orderBy("score", "desc"), limit(5));
                const querySnapshot = await getDocs(q);
                
                leaderboardLoader.classList.add('hidden');
                
                if (querySnapshot.empty) {
                    leaderboardEl.innerHTML = '<p class="text-gray-500 dark:text-gray-400">No scores yet. Be the first!</p>';
                    return;
                }

                let rank = 1;
                querySnapshot.forEach((doc) => {
                    const entry = doc.data();
                    const scoreRow = document.createElement('div');
                    scoreRow.className = 'flex justify-between items-center p-2 rounded-lg bg-gray-100 dark:bg-gray-800';
                    scoreRow.innerHTML = `
                        <span class="font-medium text-gray-800 dark:text-gray-200">${rank}. ${entry.name}</span>
                        <span class="font-bold text-purple-600 dark:text-purple-400">${entry.score}</span>
                    `;
                    leaderboardEl.appendChild(scoreRow);
                    rank++;
                });

            } catch (e) {
                console.error("Error getting leaderboard: ", e);
                leaderboardLoader.classList.add('hidden');
                leaderboardEl.innerHTML = '<p class="text-red-500">Error loading scores.</p>';
            }
        }

        async function submitScore() {
            let name = playerNameInput.value.toUpperCase().trim();
            if (name.length === 0) name = 'AAA';
            if (name.length > 3) name = name.substring(0, 3);
            
            submitScoreBtn.disabled = true;
            submitScoreBtn.textContent = '...';

            try {
                await addDoc(highscoresCol, {
                    name: name,
                    score: score,
                    createdAt: new Date()
                });
                
                // Refresh leaderboard
                await getLeaderboard();
                
            } catch (e) {
                console.error("Error adding document: ", e);
                alert("Error submitting score.");
            }
            
            // Reset UI
            submitScoreForm.classList.add('hidden');
            startBtn.textContent = "Start Over";
            startBtn.classList.remove('hidden');
            playerNameInput.value = '';
            submitScoreBtn.disabled = false;
            submitScoreBtn.textContent = 'Submit';
        }
        
        submitScoreBtn.addEventListener('click', submitScore);

        // Initial display on page load
        getLeaderboard();

        // Keyboard controls
        document.addEventListener('keydown', e => {
            // Pause game with 'P' key
            if (e.key === 'p' || e.key === 'P') {
                e.preventDefault(); // Prevent typing 'p' in the input
                togglePause();
                return;
            }

            if (!isGameRunning || isGamePaused) return;
            
            // Prevent page scroll with arrow keys
            if (e.key === 'ArrowUp' || e.key === 'ArrowDown' || e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                e.preventDefault();
            }

            if (e.key === 'ArrowLeft' && dx === 0) { dx = -grid; dy = 0; }
            else if (e.key === 'ArrowUp' && dy === 0) { dx = 0; dy = -grid; }
            else if (e.key === 'ArrowRight' && dx === 0) { dx = grid; dy = 0; }
            else if (e.key === 'ArrowDown' && dy === 0) { dx = 0; dy = grid; }
        });

        // Touch controls
        let touchStartX = 0;
        let touchStartY = 0;

        canvas.addEventListener('touchstart', e => {
            if (!isGameRunning) {
                // Don't start on tap, only on button click
                return;
            }
            if (isGamePaused) {
                togglePause(); // Unpause on tap if paused
                return;
            }
            e.preventDefault();
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
        }, { passive: false });

        canvas.addEventListener('touchmove', e => {
            e.preventDefault();
        }, { passive: false });

        canvas.addEventListener('touchend', e => {
            if (!isGameRunning || isGamePaused) return;
            e.preventDefault();
            let touchEndX = e.changedTouches[0].clientX;
            let touchEndY = e.changedTouches[0].clientY;
            
            let deltaX = touchEndX - touchStartX;
            let deltaY = touchEndY - touchStartY;
            
            // Check for minimal swipe distance to avoid accidental taps
            if (Math.abs(deltaX) < 30 && Math.abs(deltaY) < 30) return;

            if (Math.abs(deltaX) > Math.abs(deltaY)) { // Horizontal swipe
                if (deltaX > 0 && dx === 0) { // Right
                    dx = grid; dy = 0;
                } else if (deltaX < 0 && dx === 0) { // Left
                    dx = -grid; dy = 0;
                }
            } else { // Vertical swipe
                if (deltaY > 0 && dy === 0) { // Down
                    dx = 0; dy = grid;
                } else if (deltaY < 0 && dy === 0) { // Up
                    dx = 0; dy = -grid;
                }
            }
        }, { passive: false });

        // --- Other Page Scripts (Dark Mode, Scroll, etc.) ---

        // --- Mobile Menu Toggle ---
        const menuBtn = document.getElementById('mobile-menu-btn');
        const menu = document.getElementById('mobile-menu');
        const menuIconOpen = document.getElementById('menu-icon-open');
        const menuIconClose = document.getElementById('menu-icon-close');
        const mobileMenuLinks = document.querySelectorAll('.mobile-menu-link');

        menuBtn.addEventListener('click', () => {
            menu.classList.toggle('hidden');
            menuIconOpen.classList.toggle('hidden');
            menuIconClose.classList.toggle('hidden');
        });

        mobileMenuLinks.forEach(link => {
            link.addEventListener('click', () => {
                menu.classList.add('hidden');
                menuIconOpen.classList.remove('hidden');
                menuIconClose.classList.add('hidden');
            });
        });

        // --- Dark Mode Toggle ---
        const themeToggle = document.getElementById('theme-toggle');
        const lightIcon = document.getElementById('theme-icon-light');
        const darkIcon = document.getElementById('theme-icon-dark');

        // Function to set icon state
        function setIconState() {
            if (document.documentElement.classList.contains('dark')) {
                lightIcon.classList.remove('hidden'); // Show SUN icon in dark mode
                darkIcon.classList.add('hidden'); // Hide MOON icon in dark mode
            } else {
                darkIcon.classList.remove('hidden'); // Show MOON icon in light mode
                lightIcon.classList.add('hidden'); // Hide SUN icon in light mode
            }
        }

        // Set initial icon state on load
        setIconState();

        themeToggle.addEventListener('click', () => {
            // Toggle dark class
            document.documentElement.classList.toggle('dark');
            
            // Save preference
            if (document.documentElement.classList.contains('dark')) {
                localStorage.theme = 'dark';
            } else {
                localStorage.theme = 'light';
            }

            // Update icon state
            setIconState();
        });


        // --- Back to Top Button ---
        const backToTopBtn = document.getElementById('back-to-top');

        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTopBtn.classList.remove('hidden');
            } else {
                backToTopBtn.classList.add('hidden');
            }
        });

        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // --- Interactive Text Scramble Script ---
        class TextScramble {
            constructor(el) {
                this.el = el;
                this.phrases = [
                    this.el.getAttribute('data-text-1'),
                    this.el.getAttribute('data-text-2'),
                    this.el.getAttribute('data-text-3')
                ];
                this.chars = '!<>-_\\/[]{}—=+*^?#';
                this.update = this.update.bind(this);
                this.phraseIndex = 0;
            }

            setText(newText) {
                const oldText = this.el.innerText;
                const length = Math.max(oldText.length, newText.length);
                const promise = new Promise((resolve) => this.resolve = resolve);
                this.queue = [];
                for (let i = 0; i < length; i++) {
                    const from = oldText[i] || '';
                    const to = newText[i] || '';
                    const start = Math.floor(Math.random() * 40);
                    const end = start + Math.floor(Math.random() * 40);
                    this.queue.push({ from, to, start, end });
                }
                cancelAnimationFrame(this.frameRequest);
                this.frame = 0;
                this.update();
                return promise;
            }

            update() {
                let output = '';
                let complete = 0;
                for (let i = 0, n = this.queue.length; i < n; i++) {
                    let { from, to, start, end, char } = this.queue[i];
                    if (this.frame >= end) {
                        complete++;
                        output += to;
                    } else if (this.frame >= start) {
                        if (!char || Math.random() < 0.28) {
                            char = this.randomChar();
                            this.queue[i].char = char;
                        }
                        output += `<span class="text-gray-400 dark:text-gray-600">${char}</span>`;
                    } else {
                        output += from;
                    }
                }
                this.el.innerHTML = output;
                if (complete === this.queue.length) {
                    this.resolve();
                } else {
                    this.frameRequest = requestAnimationFrame(this.update);
                    this.frame++;
                }
            }

            randomChar() {
                return this.chars[Math.floor(Math.random() * this.chars.length)];
            }
        }

        const scrambleEl = document.getElementById('scramble-text');
        if (scrambleEl) {
            // FIXED: Corrected typo from TextScSramble to TextScramble
            const fx = new TextScramble(scrambleEl);
            let counter = 0;
            const next = () => {
                fx.setText(fx.phrases[counter % fx.phrases.length]).then(() => {
                    setTimeout(next, 3000); // Wait 3 seconds before next scramble
                });
                counter++;
            };
            setTimeout(next, 1000); // Start after 1 second
        }

    </script>
    
    <!-- PEEKING CAT (PNG) -->
    <div id="cat-trigger"></div> <!-- Invisible hover area -->
    <!-- FIXED: Make sure to add 'peeking-cat.png' to your folder! -->
    <img id="peeking-cat" src="peeking-cat.png" alt="A cat peeking from the bottom of the page">

</body>
</html>

